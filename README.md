# üçµüçµ cofffee_shop_inventory_managemet
It contains a IMS of  a coffee shop created using the python and Django Framework , and used the Sqlite3 for database 

# üìÉ problem statement 
when a coffee shop owner wnats to manage there inventory , They had to keep daily check of there inventory in there book and update them on a daily bases ,so they can manage there inventory . 

## üë©üèº‚Äçüíª Tech stack used in this 
The technological use case in this is Django Frame Work , Python programming language and UI features is also being used in this 

## üìÇ File Structure :
The file structurer is consist of two main types of file where 1) is of project in which we are creating our product and the 2 ) is consist of apps floder shich is inside the project file, which is connecte with the certin file of the project file , hear the main file is the manage.py fiel which manage the integration of both the project and app folders integration and connection the Structure is as follows :

Here is a simple flow chart:

```mermaid
graph TD;
    A[my_django_project] --> B[manage.py];
    A --> C[my_project/];
    A --> D[my_app/];

    subgraph "Project Configuration"
        C --> C1[__init__.py];
        C --> C2[settings.py];
        C --> C3[urls.py];
        C --> C4[wsgi.py];
        C --> C5[asgi.py];
    end

    subgraph "Application"
        D --> D1[migrations/];
        D --> D2[__init__.py];
        D --> D3[admin.py];
        D --> D4[apps.py];
        D --> D5[models.py];
        D --> D6[tests.py];
        D --> D7[views.py];
    end

    subgraph "Migrations"
        D1 --> D1a[__init__.py];
    end
```


## key Django Files with code understanding and excution 
<h2>‚öôÔ∏è manage.py</h2></br>
This file provides a command-line interface for interacting with the Django project. It is utilized for executing administrative tasks such as initiating the development server, creating new applications, and applying database migrations. Consequently, it functions as the primary utility for project management operations.

```ruby
#!/usr/bin/env python
"""Django's command-line utility for administrative tasks."""
import os
import sys


def main():
    """Run administrative tasks."""
    os.environ.setdefault("DJANGO_SETTINGS_MODULE", "coffee_shop_main.settings")
    try:
        from django.core.management import execute_from_command_line
    except ImportError as exc:
        raise ImportError(
            "Couldn't import Django. Are you sure it's installed and "
            "available on your PYTHONPATH environment variable? Did you "
            "forget to activate a virtual environment?"
        ) from exc
    execute_from_command_line(sys.argv)


if __name__ == "__main__":
    main()

```

<h2>üéõÔ∏è settings.py</h2></br>
As the central configuration file, settings.py governs the entire project's operational parameters. It contains critical definitions for the database connection, registered applications, middleware components, and other foundational configurations. This file is integral to defining the project's runtime behavior and its integration with various services.

<h2>üîó urls.py</h2></br>
The urls.py file serves as the primary URL dispatcher for the project. It contains a mapping of URL patterns to their corresponding view functions, thereby directing incoming web requests to the appropriate application logic. This mechanism effectively serves as the navigational framework for the website.

```ruby
from django.contrib import admin
from django.urls import path
from coffee_shop_app import views

urlpatterns = [
    path("Do_not_open/", admin.site.urls),
    path('',views.Home,name="Home"),
    path('Menu/',views.menu,name="menu"),
    path("Bill/",views.bill,name="bill"),
    path("Contact_us/",views.contact,name="contact"),
    path("login/",views.Loginuser,name="login"),
    path("logout/",views.Logoutuser,name="logout")
]
```

<h2>üíæ migrations/</h2></br>
This directory contains a version-controlled history of the database schema. Django's migration system automatically generates scripts within this folder in response to modifications in the models.py file. These scripts facilitate the systematic and reliable evolution of the database structure across different environments.
> [!NOTE]
> This is one of the migration:
```ruby
# Generated by Django 5.0.6 on 2024-05-27 12:02

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):
    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name="Inventory",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("Coffee_type", models.CharField(max_length=220)),
                ("quantity", models.PositiveBigIntegerField(default=0)),
                ("price", models.PositiveIntegerField(default=0)),
                ("discripsion", models.TextField()),
                ("image", models.CharField(max_length=5000000)),
            ],
        ),
        migrations.CreateModel(
            name="Sales_Data",
            fields=[
                (
                    "id",
                    models.BigAutoField(
                        auto_created=True,
                        primary_key=True,
                        serialize=False,
                        verbose_name="ID",
                    ),
                ),
                ("quantity_sold", models.PositiveIntegerField(default=0)),
                ("price", models.IntegerField(null=True)),
                ("Total_Price", models.IntegerField(null=True)),
                (
                    "menu_items",
                    models.ForeignKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        to="coffee_shop_app.inventory",
                    ),
                ),
            ],
        ),
    ]
```


<h2>üõ°Ô∏è admin.py</h2></br>
The admin.py file is used to register application models with Django's built-in administrative interface. By registering a model, its data becomes accessible for creation, retrieval, updating, and deletion operations within the admin panel. This provides a powerful and convenient interface for data management.

```ruby
from django.contrib import admin
from coffee_shop_app .models import Inventory,Sales_Data,Contact,Bookings
# Register your models here.
admin.site.register(Inventory)
admin.site.register(Sales_Data)
admin.site.register(Contact)
admin.site.register(Bookings)
```

<h2>üß© apps.py</h2></br>
Each application within a Django project includes an apps.py file for its specific configuration. This file allows for the definition of application-specific attributes and metadata. It is primarily used to declare the application's configuration class, which is then registered in the project's settings.py file.

```ruby
from django.apps import AppConfig


class CoffeeShopAppConfig(AppConfig):
    default_auto_field = "django.db.models.BigAutoField"
    name = "coffee_shop_app"
```

<h2>üìú models.py</h2></br>
The models.py file is where the data structure of an application is defined through Python classes. Each class, inheriting from django.db.models.Model, corresponds to a table in the database. This file, therefore, constitutes the definitive blueprint for the application's data storage and organization.

> [!IMPORTANT]
> You can create this type of tables for yoy Data base
```ruby
from django.db import models

class Inventory(models.Model):# Tablle for coffee items
    # Coffee_type, quantity, price, discripsion, image
    Coffee_type = models.CharField(max_length=220)
    quantity = models.PositiveBigIntegerField(default=0)
    price = models.PositiveIntegerField(default=0)
    discripsion = models.TextField()
    image = models.CharField( max_length=5000000)

    def __str__(self):
        return self.Coffee_type

class Sales_Data(models.Model):
    menu_items = models.ForeignKey(Inventory, on_delete=models.CASCADE)
    quantity_sold = models.PositiveIntegerField(default=0)
    price = models.IntegerField(null=True)
    Total_Price = models.IntegerField(null=True)

class Contact(models.Model):
    name=models.CharField( max_length=100)
    Email=models.CharField( max_length=254)
    phone=models.IntegerField(default=0)
    state=models.CharField(max_length=70)
    city=models.CharField( max_length=100)
    message=models.CharField( max_length=5000000000)
    date=models.DateField(null=True)

    def __str__(self):
        return self.name
class Bookings (models.Model):
    name=models.CharField(max_length=100)
    number=models.IntegerField(default=0)
    No_of_people=models.IntegerField(default=0)
    date=models.DateField(null=True)

    def __str__(self):
        return self.name
    
```

<h2>üß† views.py</h2></br>
This file contains the core logic for processing incoming HTTP requests and generating appropriate HTTP responses. A view function or class-based view acts as the intermediary between a user's request and the application's data models and templates. It receives request data, executes the necessary business logic‚Äîwhich may involve querying the database via the models‚Äîand then returns a response, which is frequently a dynamically rendered HTML template populated with the retrieved data.

```ruby
from django.shortcuts import render,HttpResponse,redirect
from .models import Inventory,Sales_Data,Contact,Bookings
import numpy  as np
from datetime import datetime
from django.contrib.auth.models import User
from django.contrib.auth import authenticate,login,logout
from django.contrib import messages

# password for login is parva_2565
def Home(request):
    # This function handles the home page, booking a table, and displaying a success message.
    if request.user.is_anonymous:
        return redirect("/login")
    if request.method=="POST":
            name= request.POST.get("person_name")
            person_numbe=request.POST.get("person_number")
            population= request.POST.get("population")
            bookings=Bookings.objects.create(name=name,number=person_numbe,No_of_people=population,date=datetime.now())
            bookings.save()
            messages.success(request, "Your table has been booked. Have a good day !")
    return HttpResponse(render(request,'Home.html'))

def menu(request):
    # This function retrieves inventory data, handles item purchases, updates inventory, and redirects to the bill page.
    data = Inventory.objects.all().values()
    if request.method == "POST":
        item_id = request.POST.get("item_id")
        quantity = request.POST.get("quantity")

        # Check if both item_id and quantity are provided
        if item_id and quantity:
            try:
                item_id = int(item_id)
                quantity = int(quantity)
            except ValueError:
                messages.error(request, "Please enter valid numbers for item and quantity.")
                return render(request, 'Menu.html', {"Data": data})

            item = Inventory.objects.get(id=item_id)
            if quantity <= item.quantity:
                total_price = item.price * quantity

                # Update Inventory
                item.quantity -= quantity
                item.save()

                # Store in Sales_Data
                Sales_Data.objects.create(
                    menu_items=item,
                    quantity_sold=quantity,
                    price=item.price,
                    Total_Price=total_price
                )

                return redirect('bill')  # Redirect to the bill page after order
            elif not item:
                messages.error(request, "Selected item does not exist.")
            elif quantity > item.quantity:
                messages.error(request, "Requested quantity exceeds available stock.")

    return render(request, 'Menu.html', {"Data": data})

def bill(request):
    # This function retrieves sales data and generates an invoice number for the bill page.
    main2 = Sales_Data.objects.select_related('menu_items').order_by('-id')
    invoice_No = np.random.choice(np.arange(1, 10), size=6)
    invoice_main = '-'.join(map(str, invoice_No))  # or use '-'.join(map(str, invoice_No)) for dash-separated
    grand_total = sum(item.Total_Price for item in main2)
    return render(request, 'Bill.html', {"main2": main2, "invoice_No": invoice_main , 'grand_total': grand_total})


def contact(request):
    # This function handles the contact form submission and displays a success message.
    if request.method=="POST":
        name=request.POST.get("name")
        Email=request.POST.get("Email")
        phone=request.POST.get("phone")
        State=request.POST.get("State")
        City=request.POST.get("City")
        message=request.POST.get("message")
        contact=Contact.objects.create(name=name,Email=Email,phone=phone,state=State,city=City,message=message,date=datetime.today())
        contact.save()
        messages.success(request, "Your message has been sent. We will get back to you soon.")
    return render(request, "contact_us.html")

def Loginuser(request):
    # This function authenticates a user and logs them in, redirecting to the home page upon success.
    if request.method=="POST":
        username=request.POST.get("username")
        password=request.POST.get("password")
        print(username,password)
        user = authenticate(username=username, password=password)
        if user is not None:
            login(request,user)
            return redirect("/")
        else:
             
              messages.error(request, "Enter a valid username and password")
              return HttpResponse(render(request,"login.html"))
    return HttpResponse(render(request,"login.html"))

def Logoutuser(request):
    # This function logs out the current user and redirects them to the login page.
    logout(request)
    return redirect('/login')

# admin username=admin_12345
# password= admin_1234
# thanks for viewing the code
    
```

<img width="313" height="341" alt="login_page" src="https://github.com/user-attachments/assets/cc202705-5e27-48cc-b0f5-d37c37233e6b" />
<img width="1365" height="630" alt="Home_page" src="https://github.com/user-attachments/assets/bd05852a-1070-4e24-92fe-94879fa97a9f" />
<img width="1170" height="98" alt="toggle_options" src="https://github.com/user-attachments/assets/2c44f102-1e44-4e6f-84e0-cf4d48b3ffe9" />
<img width="1138" height="435" alt="Table_booking_page" src="https://github.com/user-attachments/assets/62c4f1c5-1579-44f3-8cf1-2073428d464c" />
<img width="353" height="40" alt="sucess_messge" src="https://github.com/user-attachments/assets/6a12ab48-11eb-488b-8260-7686ccb82227" />
<img width="941" height="524" alt="Menu_page" src="https://github.com/user-attachments/assets/5951a301-72a1-4332-bc37-068da93370f1" />
<img width="375" height="289" alt="Contact_page" src="https://github.com/user-attachments/assets/50b61bf0-0dfd-4a87-91c2-d9b153ee7521" <img width="614" height="596" alt="Bill_page" src="https://github.com/user-attachments/assets/e37b04ba-e5d6-4f2c-9464-5763cf67b8bd" />
<img width="1360" height="586" alt="admin_page" src="https://github.com/user-attachments/assets/25841efd-deb2-46d4-9ec6-218d26fb88dd" />
/>
